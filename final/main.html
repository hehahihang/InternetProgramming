<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>인터넷 프로그래밍 기말고사</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <script type="text/javascript">
        var total_sum;

        function Timer() {
            var today = new Date();
            var timer = document.getElementById("timer");
            var hh = today.getHours();
            var mm = today.getMinutes();
            var ss = today.getSeconds();

            var time = hh + ":" + mm + ":" + ss;
            timer.innerText = time;

            setTimeout(Timer, 1000);
        }

        function finish() {
            var stdunet_name = document.getElementById('name');
            if (stdunet_name == null) {
                alert("이름을 입력해주세요");
                return false;
            }
            else {
                var realName = stdunet_name.value;
                var k = confirm(realName + "님, 신청내역을 결제하시겠습니까?");
                if (k == true) {
                    alert(total_sum + "원이 결제 완료되었습니다." + "\n" + "감사합니다.");
                }
                else {
                    alert("결제가 취소되었습니다.");
                }
            }

        }

        function validateForm() {
            var x = document.forms["myForm"]["fname"].value;
            if (x == null || x == "") {
                alert("First name must be filled out");
                return false;
            }
        }

        function check(frm) {
            var obj = document.getElementById('subject');
            var str = "";
            var cnt = 0;
            var sum = 0;
            for (i = 0; i < obj.length; i++) {
                if (obj[i].selected) {
                    str += obj[i].value + ", ";
                    cnt++;
                    sum += (i + 2) * 5000;
                }
            }
            str = str.substring(0, str.length - 2);
            frm.detail.value = "님께서는 " + str + "강좌를 신청하셨습니다." + "\n" + "24시간 내에 결제를 해야 수강신청이 완료됩니다." + "\n\n" +
                "신청강좌는 " + cnt + "강좌이며, " + "결제 금액은" + sum + "원 입니다." + "\n" + "이용해주셔서 감사합니다.";
            frm.money.value = sum;
            total_sum = sum;
            meter.value = cnt;
            return;
        }

        

    </script>
</head>

<body onload="Timer()">
    <header>
        <h3>인터넷 프로그래밍 기말고사</h3>
    </header>
    <nav id="nav">
        <div>
            <ul>
                <li><a href="main.html">수강신청</a></li>
                <li><a href="calc.html">계산기</a></li>
            </ul>
        </div>
    </nav>

    <article id="outer">
        <article id="inner">
            <h2>[인터넷 수강신청]</h2>
            <section>
            </section>
            <section>
                <video id="video" src="http://media.w3.org/2019/03/web30_timbl_w3c_subtitled.mp4" controls
                    poster="http://www.booksr.co.kr/upload_data/Catalog/웹프로그래밍표지(0).jpg"></video>
                <form>
                    <fieldset>
                        <legend>강의 목록</legend>
                        <table>
                            <tr>
                                <td>현재 시간 : </td>
                                <td colspan="2">
                                    <div id="timer"></div>
                                </td>
                            </tr>
                            <tr>
                                <td>강의 목록 : </td>
                                <td colspan="2">
                                    <form>
                                        <select id="subject" name="subject" size="4" multiple="multiple"
                                            onchange="check(this.form)">
                                            <option value="HTML">HTML5 10,000원</option>
                                            <option value="CSS">CSS 15,000원</option>
                                            <option value="JavaScript">JavaScript 20,000원</option>
                                            <option value="jQurey">jQurey 25,000원</option>
                                        </select>
                                    </form>
                                </td>
                            </tr>
                            <tr>
                                <td>이 름 : </td>
                                <td colspan="2">
                                    <input type="text" required id="name">
                                </td>
                            </tr>
                            <tr>
                                <td>신청내역 : </td>
                                <td colspan="2">
                                    <textarea name="detail" id="detail" readonly>

                                    </textarea>
                                </td>
                            </tr>
                            <tr>
                                <td>총 합 계 : </td>
                                <td><input name="money" id="money" type="text" placeholder=0>원</td>
                                <td><meter name="meter" id="meter" min="0" max="4"> </meter></td>
                            </tr>
                            <tr align="center">
                                <td id="pay" colspan="3">
                                    <input type="submit" value="결제" onclick="finish()">
                                    <input type="submit" value="취소">
                                </td>
                            </tr>
                        </table>
                    </fieldset>
                </form>
            </section>
        </article>
    </article>

    <footer><b>2020년 7월 28일 / 작성자: 2014112487 정광수</b></footer>
</body>

</html>